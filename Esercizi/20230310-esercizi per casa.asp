% Dati i seguenti programmi datalog, calcolare il punto 
% fisso dellï¿½operatore TP.


a.
b :- a.
d :- a, b.
f :- b, c.
c :- a, b, d.

SOL: {
    TP(0): {a}
    TP(1): {a, b}
    TP(2): {a, b, d}
    TP(3): {a, b, c, d}
    TP(4): {a, b, c, d, f}      % Least Model
}

% ------------------------------------

a :- e.
b :- a.
f :- b, g.
b :- g, f.
g :- a, b, e.
e.

SOL: {
    TP(0): {e}
    TP(1): {a, e}
    TP(2): {a, b, e}
    TP(3): {a, b, e, g}
    TP(4): {a, b, e, f, g}      % Least Model
}

% ------------------------------------


a(X) :- b(X), c(X).
b(X) :- c(X).
b(X) :- a(X).

c(1). c(2).

SOL: {
    TP(0): {c(1), c(2)}
    TP(1): {b(1), b(2), c(1), c(2)}
    TP(2): {a(1), a(2), b(1), b(2), c(1), c(2)}     % Least Model
}

% ------------------------------------

a(X) :- g(X,Y), h(Y).
h(X) :- b(X).
h(X) :- m(X,X).
b(X) :- g(Y,X).
g(X,Y) :- m(X,Y).
m(1,2).
m(2,3).

SOL: {
    TP(0): {m(1,2), m(2,3)}
    TP(1): {g(1,2), g(2,3), m(1,2), m(2,3)}
    TP(2): {b(2), b(3), g(1,2), g(2,3), m(1,2), m(2,3)}
    TP(3): {b(2), b(3), g(1,2), g(2,3), h(2), h(3), m(1,2), m(2,3)}
    TP(4): {a(1), a(2), b(2), b(3), g(1,2), g(2,3), h(2), h(3), m(1,2), m(2,3)}     % Least Model
}

% ------------------------------------

s(X,X):- t(X), t(Y), u(X).
t(Y) :- s(Y,X), u(X), X=1+Y.          
 
s(1,2).
u(2).
u(1).

SOL: {
    TP(0): {s(1,2), u(1), u(2)}
    TP(1): {s(1,2), t(1), u(1), u(2)}       
    TP(2): {s(1,1), s(1,2), t(1), u(1), u(2)}       % Least Model  

}

% ------------------------------------

r(X,Y) :- q(X),q(Y), X<Y.
p(Y,X) :- r(X,Z), p(Z,Y).

q(1). q(2). q(3). p(3,1).p(3,2).

SOL: {
    TP(0): {p(3,1), p(3,2), q(1), q(2), q(3)}
    TP(1): {r(1,2), r(1,3), r(2,3), p(3,1), p(3,2), q(1), q(2), q(3)}
    TP(1): {r(1,2), r(1,3), r(2,3), p(1,1), p(1,2), p(2,1), p(2,2), p(3,1), p(3,2), q(1), q(2), q(3)}       % Least Model
}

% ------------------------------------

% non ground, ciclico   

p(X,Y) :- q(X),q(Y), X<Y.
p(Y,X) :- p(X,Z), p(Z,Y).

q(1). q(2). q(3).

SOL: {
    TP(0): {q(1), q(2), q(3)}
    TP(1): {p(1,2), p(1,3), p(2,3), q(1), q(2), q(3)}
    TP(2): {p(1,2), p(1,3), p(2,3), p(3,1), q(1), q(2), q(3)}
    TP(3): {p(1,1), p(1,2), p(1,3), p(2,1), p(2,3), p(3,1), q(1), q(2), q(3)}
    TP(4): {p(1,1), p(1,2), p(1,3), p(2,1), p(2,2), p(2,3), p(3,1), p(3,2), q(1), q(2), q(3)}
    TP(5): {p(1,1), p(1,2), p(1,3), p(2,1), p(2,2), p(2,3), p(3,1), p(3,2), p(3,3), q(1), q(2), q(3)}       % Least Model
}

